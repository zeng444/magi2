/*! gruntjs.cn 2014-05-31 */
!function(a,b){var c="2.0",d={is_mvc:!0,view_path:"themes/",module_path:"model/",controller_path:"controller/",default_controller:"index",default_action:"index",app_playground_obj:"",playground_name:"contenter",ajax_tip_class:"_ajax_loading",default_page_effection:"swipeleft",is_header_footer_transition_fixed:!0,default_query:{},is_use_tpl_cache:!1,tpl_rule:"{$class}.{$method}.html",extend_utility:[],default_controller_construct:void 0},e=function(a){this._browser_not_support()||(this.config=this._check_config(a),this.lasyload=new lasyload,this.playground=new playground({playground_name:this.config.playground_name,app_playground_obj:this.config.app_playground_obj}),this._get=[],this._class="",this._method="",this.history=new phistory(this.config.playground_name),this.route=new route(this.history,this.config),this.cache=new cache,this.cache_tpl_filename="_magi_page_cache.js")};e.prototype._check_config=function(a){return a&&(a.module_path&&(d.module_path=a.module_path),a.controller_path&&(d.controller_path=a.controller_path),a.view_path&&(d.view_path=a.view_path),a.default_controller&&(d.default_controller=a.default_controller),a.default_action&&(d.default_action=a.default_action),a.default_query&&(d.default_query=a.default_query),a.default_page_effection&&(d.default_page_effection=a.default_page_effection),a.playground_name&&(d.playground_name=a.playground_name),a.ajax_tip_class&&(d.ajax_tip_class=a.ajax_tip_class),a.extend_utility&&(d.extend_utility=a.extend_utility),a.tpl_rule&&(d.tpl_rule=a.tpl_rule),a.default_controller_construct&&(d.default_controller_construct=a.default_controller_construct),a.is_header_footer_transition_fixed&&(d.is_header_footer_transition_fixed=a.is_header_footer_transition_fixed),a.app_playground_obj&&(d.app_playground_obj=a.app_playground_obj),"boolean"==typeof a.is_use_tpl_cache&&(d.is_use_tpl_cache=a.is_use_tpl_cache),"boolean"==typeof a.is_mvc&&(d.is_mvc=a.is_mvc)),d},e.prototype.startup=function(){this.config&&(this.config.is_use_tpl_cache&&this.config.extend_utility.push(this.config.view_path+this.config.cache_tpl_filename),this.lasyload.files(this.config.extend_utility,this._start_script))},e.prototype._start_script=function(){this.playground.create();var a=this.route.url_to_route();this._get=a._query?a._query:this.config.default_query,this._class=a._class?a._class:this.config.default_controller,this._method=a._method?a._method:this.config.default_action,this.route.to(this._class,this._method,this._get,this.config.default_page_effection)},e.prototype.version=function(){return c},e.prototype._browser_not_support=function(){return!b.navigator.is_ie()||b.navigator.is_ie10()||b.navigator.is_ie9()?void 0:(b("body")[0].innerHTML='<div style="margin:15px;"><h2>Magi js-framework '+this.version()+'</h2><span>Notice:This framework do not  support absolute browser ,you can try to webkit or mozila browser<br />if you want get more infomation you can mail to:<a href="mailto:zeng444@163.com">zeng444@163.com</a></span></div>',!0)},a.magi=e}(window,$);