/*! gruntjs.cn 2014-05-31 */

/*! gruntjs.cn 2014-05-31 */
var cache=function(){this.ticket="renren"};cache.prototype.if_not_supurt_to_do=function(){window.localStorage||(window.localStorage={getItem:function(a){return a&&this.hasOwnProperty(a)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(a){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[a])},setItem:function(a,b){a&&(document.cookie=escape(a)+"="+escape(b)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(a){a&&this.hasOwnProperty(a)&&(document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},window.localStorage.length=(document.cookie.match(/\=/g)||window.localStorage).length)},cache.prototype.value=function(a,b,c){return window.localStorage?b?dojob.cache.set(this.ticket+a,b,c):dojob.cache.get(this.ticket+a):void 0},cache.prototype.get=function(a){if(window.localStorage){var b=JSON.parse(localStorage.getItem(a));if(b){var c=+new Date-b.create_at;if(c<b.expires||0==b.expires)return b.val;dojob.cache.remove(a)}}},cache.prototype.set=function(a,b,c){return window.localStorage?(localStorage.setItem(a,JSON.stringify({expires:c?parseInt(c):0,create_at:+new Date,val:b})),!0):void 0},cache.prototype.remove=function(a){return window.localStorage?(localStorage.removeItem(a),!0):void 0},cache.prototype.clear=function(){window.localStorage&&localStorage.clear()};
/*! gruntjs.cn 2014-05-31 */
var phistory=function(a){this.cache=new cache,this.key="magi_history",this.ticket=a,this.absolute=[];var b=this.cache.get(this.key+"_"+this.ticket);this.list=b?b:[],this.page_number=30};phistory.prototype.write=function(a,b,c){return this.list.length>=this.page_number&&this.remove(0),this.absolute=[a,b,c],this.list.push(this.absolute),this.cache.set(this.key+"_"+this.ticket,this.list),!0},phistory.prototype.remove=function(a){this.list.splice(a,1)},phistory.prototype.clear=function(){this.list=[]};
/*! gruntjs.cn 2014-05-31 */
var lasyload=function(){this.timeout=3e3,this.loaded_file_list=[]};lasyload.prototype.file=function(a,b){if(this.loaded_file_list[a])b&&b();else{var c=document.createElement("script");c.type="text/javascript",$("head")[0].appendChild(c),c.onload=function(){this.loaded_file_list[a]=!0,b&&b()},c.src=a}},lasyload.prototype.files=function(a,b){if(a[0]){var c=a.length,d=0,e=setInterval(function(){c==d&&(clearInterval(e),b&&b())},50);setTimeout(function(){c!=d&&clearInterval(e)},this.timeout);for(var f=0;f<a.length;f++)dojob.lasyload.file(a[f],function(){d++})}else b&&b()};
/*! gruntjs.cn 2014-05-31 */
!function(a,b){var c="2.0",d={is_mvc:!0,view_path:"themes/",module_path:"model/",controller_path:"controller/",default_controller:"index",default_action:"index",app_playground_obj:"",playground_name:"contenter",ajax_tip_class:"_ajax_loading",default_page_effection:"swipeleft",is_header_footer_transition_fixed:!0,default_query:{},is_use_tpl_cache:!1,tpl_rule:"{$class}.{$method}.html",extend_utility:[],default_controller_construct:void 0},e=function(a){this._browser_not_support()||(this.config=this._check_config(a),this.lasyload=new lasyload,this.playground=new playground({playground_name:this.config.playground_name,app_playground_obj:this.config.app_playground_obj}),this._get=[],this._class="",this._method="",this.history=new phistory(this.config.playground_name),this.route=new route(this.history,this.config),this.cache=new cache,this.cache_tpl_filename="_magi_page_cache.js")};e.prototype._check_config=function(a){return a&&(a.module_path&&(d.module_path=a.module_path),a.controller_path&&(d.controller_path=a.controller_path),a.view_path&&(d.view_path=a.view_path),a.default_controller&&(d.default_controller=a.default_controller),a.default_action&&(d.default_action=a.default_action),a.default_query&&(d.default_query=a.default_query),a.default_page_effection&&(d.default_page_effection=a.default_page_effection),a.playground_name&&(d.playground_name=a.playground_name),a.ajax_tip_class&&(d.ajax_tip_class=a.ajax_tip_class),a.extend_utility&&(d.extend_utility=a.extend_utility),a.tpl_rule&&(d.tpl_rule=a.tpl_rule),a.default_controller_construct&&(d.default_controller_construct=a.default_controller_construct),a.is_header_footer_transition_fixed&&(d.is_header_footer_transition_fixed=a.is_header_footer_transition_fixed),a.app_playground_obj&&(d.app_playground_obj=a.app_playground_obj),"boolean"==typeof a.is_use_tpl_cache&&(d.is_use_tpl_cache=a.is_use_tpl_cache),"boolean"==typeof a.is_mvc&&(d.is_mvc=a.is_mvc)),d},e.prototype.startup=function(){this.config&&(this.config.is_use_tpl_cache&&this.config.extend_utility.push(this.config.view_path+this.config.cache_tpl_filename),this.lasyload.files(this.config.extend_utility,this._start_script))},e.prototype._start_script=function(){this.playground.create();var a=this.route.url_to_route();this._get=a._query?a._query:this.config.default_query,this._class=a._class?a._class:this.config.default_controller,this._method=a._method?a._method:this.config.default_action,this.route.to(this._class,this._method,this._get,this.config.default_page_effection)},e.prototype.version=function(){return c},e.prototype._browser_not_support=function(){return!b.navigator.is_ie()||b.navigator.is_ie10()||b.navigator.is_ie9()?void 0:(b("body")[0].innerHTML='<div style="margin:15px;"><h2>Magi js-framework '+this.version()+'</h2><span>Notice:This framework do not  support absolute browser ,you can try to webkit or mozila browser<br />if you want get more infomation you can mail to:<a href="mailto:zeng444@163.com">zeng444@163.com</a></span></div>',!0)},a.magi=e}(window,$);
/*! gruntjs.cn 2014-05-31 */
var mvc=function(a){this.config=a};mvc.prototype.build=function(a,b,c,d){this.viewer(a,b,function(){this.playground.load(a,b,c,d)})},mvc.prototype.viewer=function(a,b,c){var d=this.parse_page_name(a,b);window.view_page_cache[d]?c&&c(window.view_page_cache[d]):$.ajax.get(this.get_remote_tpl_path(a,b),{},function(a){c&&c(a),window.view_page_cache[d]=a})},mvc.prototype.get_remote_tpl_path=function(a,b){var c=this.config.tpl_rule.replace(/\{\$class\}/,a);return c=c.replace(/\{\$method\}/,b),c=this.config.view_path+c},mvc.prototype.parse_page_name=function(a,b){return"page_"+a+"_"+b};
/*! gruntjs.cn 2014-05-31 */
var playground=function(a){this.playgroud_idname=a.playground_name,this.playgroud_dom_object=a.app_playground_obj};playground.prototype.create=function(){var a=this.playgroud_dom_object,b=document.createElement("div");b.id=this.playgroud_idname,b.style.position="relative";var c=document.createElement("div");c.id=this.playgroud_idname+"_mask",b.appendChild(c),(a?a:document.body).appendChild(b)},playground.prototype.load=function(_class,_method,_query,_effect){var parent=$("#"+this.playground_idname)[0],id=this.playground_name+"_mask",page_mask_obj=$("#"+page_mask_name)[0],append_page_name=dojob.route.page_name(_class,_method,_query);if(parent.style.overflowX="hidden",page_mask_obj.style.width="100%",parent.style.minHeight="100%",page_mask_obj.style.minHeight="100%",window._this)$("#"+append_page_name)[0]||(_effect=_effect&&"undefined"!=_effect?_effect:define.default_page_effection,eval("var effect_fun = dojob.effect."+_effect),effect_fun?effect_fun(append_page_name,window._this,page_mask_obj,page_group_obj,_construct,_callback):dojob.effect.none(append_page_name,window._this,page_mask_obj,page_group_obj,_construct,_callback));else{var page=document.createElement("div");page.style.minHeight="100%",page.id="_blank",page_mask_obj.appendChild(page),dojob.effect.none(append_page_name,page,page_mask_obj,parent,_construct,_callback)}};
/*! gruntjs.cn 2014-05-31 */
var route=function(a,b){this.history=a,this.mvc=new mvc(b)};route.prototype.url_to_query=function(a){var b=/\?(.*)/i,c=b.exec(a);if(c){for(var d={},c=c[1].split("&"),e=0;e<c.length;e++){var f=c[e].split("=");d[f[0]]=decodeURIComponent(f[1])}delete d.job}return d},route.prototype.url_to_route=function(){var a=window.location.href,b=/job=([\d\w\-\_]+)#([\d\w\-\_]+)/i,c=b.exec(a),d=this.url_to_query(window.location.href),e="",f="";return c&&c[1]&&c[2]&&(e=c[1],f=c[2]),{_class:e,_method:f,_query:d}},route.prototype.name=function(a,b,c){var d="";for(var e in c)"job"!=e&&(d+="_"+e+"_"+encodeURIComponent(c[e]));return a+"-"+b+d.replace(/\%|\.|\(|\)/g,"")},route.prototype.to=function(a,b,c){this.build_url_change(a,b,c),this.history.write(a,b,c),this.mvc.build(a,b,c)},route.prototype.build_url_change=function(a,b,c){if(history.replaceState){var c=this.build_http_query(c),d="?job="+a+"#"+b+c,e=(a+"#"+b+c).replace("&","?"),f={title:document.title,url:d,route:e};history.pushState(f,document.title,d),window.onpopstate=function(a){return a&&a.state&&this.url(a.state.route,"none"),!1}}},route.prototype.build_http_query=function(a){var b=[];for(var c in a)b.push("&"+c+"="+encodeURIComponent(a[c]));return b.join("")},route.prototype.url=function(){},route.prototype.back=function(){},route.prototype.history=function(){};
/*! gruntjs.cn 2014-05-31 */
var tpl=function(a){this.config=a};tpl.prototype.load_offline_tpl=function(){1==this.config.is_use_tpl_cache&&this.lasyload.file(this.config.view_path+"_magi_page_cache.js",function(){call&&call()})};
/*! gruntjs.cn 2014-05-31 */

/*! gruntjs.cn 2014-05-31 */
var cache=function(){this.ticket="renren"};cache.prototype.if_not_supurt_to_do=function(){window.localStorage||(window.localStorage={getItem:function(a){return a&&this.hasOwnProperty(a)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(a){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[a])},setItem:function(a,b){a&&(document.cookie=escape(a)+"="+escape(b)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(a){a&&this.hasOwnProperty(a)&&(document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},window.localStorage.length=(document.cookie.match(/\=/g)||window.localStorage).length)},cache.prototype.value=function(a,b,c){return window.localStorage?b?dojob.cache.set(this.ticket+a,b,c):dojob.cache.get(this.ticket+a):void 0},cache.prototype.get=function(a){if(window.localStorage){var b=JSON.parse(localStorage.getItem(a));if(b){var c=+new Date-b.create_at;if(c<b.expires||0==b.expires)return b.val;dojob.cache.remove(a)}}},cache.prototype.set=function(a,b,c){return window.localStorage?(localStorage.setItem(a,JSON.stringify({expires:c?parseInt(c):0,create_at:+new Date,val:b})),!0):void 0},cache.prototype.remove=function(a){return window.localStorage?(localStorage.removeItem(a),!0):void 0},cache.prototype.clear=function(){window.localStorage&&localStorage.clear()};
/*! gruntjs.cn 2014-05-31 */
var phistory=function(a){this.cache=new cache,this.key="magi_history",this.ticket=a,this.absolute=[];var b=this.cache.get(this.key+"_"+this.ticket);this.list=b?b:[],this.page_number=30};phistory.prototype.write=function(a,b,c){return this.list.length>=this.page_number&&this.remove(0),this.absolute=[a,b,c],this.list.push(this.absolute),this.cache.set(this.key+"_"+this.ticket,this.list),!0},phistory.prototype.remove=function(a){this.list.splice(a,1)},phistory.prototype.clear=function(){this.list=[]};
/*! gruntjs.cn 2014-05-31 */
var lasyload=function(){this.timeout=3e3,this.loaded_file_list=[]};lasyload.prototype.file=function(a,b){if(this.loaded_file_list[a])b&&b();else{var c=document.createElement("script");c.type="text/javascript",$("head")[0].appendChild(c),c.onload=function(){this.loaded_file_list[a]=!0,b&&b()},c.src=a}},lasyload.prototype.files=function(a,b){if(a[0]){var c=a.length,d=0,e=setInterval(function(){c==d&&(clearInterval(e),b&&b())},50);setTimeout(function(){c!=d&&clearInterval(e)},this.timeout);for(var f=0;f<a.length;f++)dojob.lasyload.file(a[f],function(){d++})}else b&&b()};
/*! gruntjs.cn 2014-05-31 */
!function(a,b){var c="2.0",d={is_mvc:!0,view_path:"themes/",module_path:"model/",controller_path:"controller/",default_controller:"index",default_action:"index",app_playground_obj:"",playground_name:"contenter",ajax_tip_class:"_ajax_loading",default_page_effection:"swipeleft",is_header_footer_transition_fixed:!0,default_query:{},is_use_tpl_cache:!1,tpl_rule:"{$class}.{$method}.html",extend_utility:[],default_controller_construct:void 0},e=function(a){this._browser_not_support()||(this.config=this._check_config(a),this.lasyload=new lasyload,this.playground=new playground({playground_name:this.config.playground_name,app_playground_obj:this.config.app_playground_obj}),this._get=[],this._class="",this._method="",this.history=new phistory(this.config.playground_name),this.route=new route(this.history,this.config),this.cache=new cache,this.cache_tpl_filename="_magi_page_cache.js")};e.prototype._check_config=function(a){return a&&(a.module_path&&(d.module_path=a.module_path),a.controller_path&&(d.controller_path=a.controller_path),a.view_path&&(d.view_path=a.view_path),a.default_controller&&(d.default_controller=a.default_controller),a.default_action&&(d.default_action=a.default_action),a.default_query&&(d.default_query=a.default_query),a.default_page_effection&&(d.default_page_effection=a.default_page_effection),a.playground_name&&(d.playground_name=a.playground_name),a.ajax_tip_class&&(d.ajax_tip_class=a.ajax_tip_class),a.extend_utility&&(d.extend_utility=a.extend_utility),a.tpl_rule&&(d.tpl_rule=a.tpl_rule),a.default_controller_construct&&(d.default_controller_construct=a.default_controller_construct),a.is_header_footer_transition_fixed&&(d.is_header_footer_transition_fixed=a.is_header_footer_transition_fixed),a.app_playground_obj&&(d.app_playground_obj=a.app_playground_obj),"boolean"==typeof a.is_use_tpl_cache&&(d.is_use_tpl_cache=a.is_use_tpl_cache),"boolean"==typeof a.is_mvc&&(d.is_mvc=a.is_mvc)),d},e.prototype.startup=function(){this.config&&(this.config.is_use_tpl_cache&&this.config.extend_utility.push(this.config.view_path+this.config.cache_tpl_filename),this.lasyload.files(this.config.extend_utility,this._start_script))},e.prototype._start_script=function(){this.playground.create();var a=this.route.url_to_route();this._get=a._query?a._query:this.config.default_query,this._class=a._class?a._class:this.config.default_controller,this._method=a._method?a._method:this.config.default_action,this.route.to(this._class,this._method,this._get,this.config.default_page_effection)},e.prototype.version=function(){return c},e.prototype._browser_not_support=function(){return!b.navigator.is_ie()||b.navigator.is_ie10()||b.navigator.is_ie9()?void 0:(b("body")[0].innerHTML='<div style="margin:15px;"><h2>Magi js-framework '+this.version()+'</h2><span>Notice:This framework do not  support absolute browser ,you can try to webkit or mozila browser<br />if you want get more infomation you can mail to:<a href="mailto:zeng444@163.com">zeng444@163.com</a></span></div>',!0)},a.magi=e}(window,$);
/*! gruntjs.cn 2014-05-31 */
var mvc=function(a){this.config=a};mvc.prototype.build=function(a,b,c,d){this.viewer(a,b,function(){this.playground.load(a,b,c,d)})},mvc.prototype.viewer=function(a,b,c){var d=this.parse_page_name(a,b);window.view_page_cache[d]?c&&c(window.view_page_cache[d]):$.ajax.get(this.get_remote_tpl_path(a,b),{},function(a){c&&c(a),window.view_page_cache[d]=a})},mvc.prototype.get_remote_tpl_path=function(a,b){var c=this.config.tpl_rule.replace(/\{\$class\}/,a);return c=c.replace(/\{\$method\}/,b),c=this.config.view_path+c},mvc.prototype.parse_page_name=function(a,b){return"page_"+a+"_"+b};
/*! gruntjs.cn 2014-05-31 */
var playground=function(a){this.playgroud_idname=a.playground_name,this.playgroud_dom_object=a.app_playground_obj};playground.prototype.create=function(){var a=this.playgroud_dom_object,b=document.createElement("div");b.id=this.playgroud_idname,b.style.position="relative";var c=document.createElement("div");c.id=this.playgroud_idname+"_mask",b.appendChild(c),(a?a:document.body).appendChild(b)},playground.prototype.load=function(_class,_method,_query,_effect){var parent=$("#"+this.playground_idname)[0],id=this.playground_name+"_mask",page_mask_obj=$("#"+page_mask_name)[0],append_page_name=dojob.route.page_name(_class,_method,_query);if(parent.style.overflowX="hidden",page_mask_obj.style.width="100%",parent.style.minHeight="100%",page_mask_obj.style.minHeight="100%",window._this)$("#"+append_page_name)[0]||(_effect=_effect&&"undefined"!=_effect?_effect:define.default_page_effection,eval("var effect_fun = dojob.effect."+_effect),effect_fun?effect_fun(append_page_name,window._this,page_mask_obj,page_group_obj,_construct,_callback):dojob.effect.none(append_page_name,window._this,page_mask_obj,page_group_obj,_construct,_callback));else{var page=document.createElement("div");page.style.minHeight="100%",page.id="_blank",page_mask_obj.appendChild(page),dojob.effect.none(append_page_name,page,page_mask_obj,parent,_construct,_callback)}};
/*! gruntjs.cn 2014-05-31 */
var route=function(a,b){this.history=a,this.mvc=new mvc(b)};route.prototype.url_to_query=function(a){var b=/\?(.*)/i,c=b.exec(a);if(c){for(var d={},c=c[1].split("&"),e=0;e<c.length;e++){var f=c[e].split("=");d[f[0]]=decodeURIComponent(f[1])}delete d.job}return d},route.prototype.url_to_route=function(){var a=window.location.href,b=/job=([\d\w\-\_]+)#([\d\w\-\_]+)/i,c=b.exec(a),d=this.url_to_query(window.location.href),e="",f="";return c&&c[1]&&c[2]&&(e=c[1],f=c[2]),{_class:e,_method:f,_query:d}},route.prototype.name=function(a,b,c){var d="";for(var e in c)"job"!=e&&(d+="_"+e+"_"+encodeURIComponent(c[e]));return a+"-"+b+d.replace(/\%|\.|\(|\)/g,"")},route.prototype.to=function(a,b,c){this.build_url_change(a,b,c),this.history.write(a,b,c),this.mvc.build(a,b,c)},route.prototype.build_url_change=function(a,b,c){if(history.replaceState){var c=this.build_http_query(c),d="?job="+a+"#"+b+c,e=(a+"#"+b+c).replace("&","?"),f={title:document.title,url:d,route:e};history.pushState(f,document.title,d),window.onpopstate=function(a){return a&&a.state&&this.url(a.state.route,"none"),!1}}},route.prototype.build_http_query=function(a){var b=[];for(var c in a)b.push("&"+c+"="+encodeURIComponent(a[c]));return b.join("")},route.prototype.url=function(){},route.prototype.back=function(){},route.prototype.history=function(){};
/*! gruntjs.cn 2014-05-31 */
var tpl=function(a){this.config=a};tpl.prototype.load_offline_tpl=function(){1==this.config.is_use_tpl_cache&&this.lasyload.file(this.config.view_path+"_magi_page_cache.js",function(){call&&call()})};